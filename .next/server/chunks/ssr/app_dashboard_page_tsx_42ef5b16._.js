module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(53427),d=a.i(50944),e=a.i(72131),f=a.i(46271),g=a.i(32860),h=a.i(53722),i=a.i(41710),j=a.i(93518),k=a.i(48464),l=a.i(96221),m=a.i(15618),n=a.i(3130),o=a.i(40695),p=a.i(5522),q=a.i(2150),r=a.i(54161);a.i(69387);var s=a.i(60574),t=a.i(50463),u=a.i(27422),v=a.i(95245),w=a.i(59501),x=a.i(99614),y=a.i(77687),z=a.i(38246),A=a.i(4720),B=a.i(41675),C=a.i(81560),D=a.i(70106);let E=(0,D.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),F=(0,D.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function G(){let{user:a}=(0,c.useUser)(),f=(0,c.useFirestore)(),g=(0,d.useRouter)(),[h,i]=(0,e.useState)(null),j=(0,c.useMemoFirebase)(()=>a&&f?(0,s.query)((0,s.collection)(f,"uploadedMaterials"),(0,s.where)("userId","==",a.uid)):null,[a,f]),{data:k,isLoading:l}=(0,c.useCollection)(j),m=async b=>{if(f&&a){i(b);try{await (0,s.deleteDoc)((0,s.doc)(f,"uploadedMaterials",b)),(0,y.toast)({title:"Material Deleted",description:"The uploaded material has been removed."})}catch(a){(0,y.toast)({variant:"destructive",title:"Error",description:"Failed to delete material."})}finally{i(null)}}};return l?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(t.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(t.Skeleton,{className:"h-6 w-3/4"}),(0,b.jsx)(t.Skeleton,{className:"h-4 w-1/2 mt-2"})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)(t.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(t.Skeleton,{className:"h-10 w-full mt-4"})]})]},c))})]}):k&&0!==k.length?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Uploaded Materials"}),(0,b.jsx)(o.Button,{onClick:()=>g.push("/dashboard/practice"),children:"Upload New Material"})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:k.map(a=>(0,b.jsxs)(n.Card,{className:"bg-card/80 backdrop-blur-sm",children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(n.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(A.FileText,{className:"h-5 w-5 text-primary"}),a.fileName]}),(0,b.jsxs)(n.CardDescription,{className:"mt-2 flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(B.Calendar,{className:"h-3 w-3"}),new Date(a.uploadedAt).toLocaleDateString()]}),a.subject&&(0,b.jsx)(r.Badge,{variant:"secondary",children:a.subject})]})]})})}),(0,b.jsxs)(n.CardContent,{className:"space-y-4",children:[void 0!==a.quizCompleted&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-1",children:[(0,b.jsx)("span",{children:"Quiz Progress"}),(0,b.jsxs)("span",{children:[a.quizCompleted,"%"]})]}),(0,b.jsx)(q.Progress,{value:a.quizCompleted,className:"h-2"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(o.Button,{size:"sm",variant:"outline",onClick:()=>{a.keyAnswers&&a.keyAnswers.length>0?g.push(`/dashboard/materials/${a.id}/review`):(0,y.toast)({variant:"destructive",title:"No Answers Available",description:"Key answers have not been generated for this material yet."})},className:"flex-1",children:[(0,b.jsx)(F,{className:"h-4 w-4 mr-1"}),"Review Answers"]}),(0,b.jsxs)(o.Button,{size:"sm",onClick:()=>{a.quizId?g.push(`/dashboard/practice?materialId=${a.id}`):g.push(`/dashboard/practice?materialId=${a.id}&generate=true`)},className:"flex-1",children:[(0,b.jsx)(E,{className:"h-4 w-4 mr-1"}),"Start Quiz"]})]}),(0,b.jsxs)(o.Button,{size:"sm",variant:"ghost",onClick:()=>m(a.id),disabled:h===a.id,className:"w-full text-destructive hover:text-destructive",children:[(0,b.jsx)(C.Trash2,{className:"h-4 w-4 mr-1"}),h===a.id?"Deleting...":"Delete"]})]})]},a.id))})]}):(0,b.jsx)(n.Card,{className:"bg-muted/50",children:(0,b.jsxs)(n.CardContent,{className:"p-8 text-center",children:[(0,b.jsx)(A.FileText,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No uploaded materials yet."}),(0,b.jsx)(o.Button,{className:"mt-4",onClick:()=>g.push("/dashboard/practice"),children:"Upload Your First Material"})]})})}var H=a.i(24669),I=a.i(53277);let J=(0,D.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var K=a.i(50429),L=a.i(29806),M=a.i(18155),N=a.i(23665),O=a.i(58042),P=a.i(94222),Q=a.i(54419),R=a.i(59854),S=a.i(48662),T=a.i(57431),U=a.i(77924);function V(){let{user:a}=(0,c.useUser)(),d=(0,c.useFirestore)(),f=(0,c.useMemoFirebase)(()=>a&&d?(0,s.query)((0,s.collection)(d,"attempts"),(0,s.where)("studentId","==",a.uid)):null,[a,d]),{data:g,isLoading:j}=(0,c.useCollection)(f),k=(0,e.useMemo)(()=>g&&0!==g.length?(0,L.calculateAnalytics)(g):null,[g]);if(j)return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(t.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(t.Skeleton,{className:"h-6 w-3/4"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)(t.Skeleton,{className:"h-8 w-full"})})]},c))})]});if(!k||g?.length===0)return(0,b.jsx)(n.Card,{className:"bg-muted/50",children:(0,b.jsxs)(n.CardContent,{className:"p-8 text-center",children:[(0,b.jsx)(h.BookOpen,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Complete some quizzes to see your analytics."})]})});let l=k.accuracyOverTime.map(a=>({date:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),accuracy:Math.round(a.accuracy)})),m=k.weakAreas.slice(0,5).map(a=>({topic:a.topic.substring(0,20),accuracy:Math.round(a.accuracy)}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Performance Analytics"}),(0,b.jsxs)(r.Badge,{variant:"improving"===k.improvementTrend?"default":"declining"===k.improvementTrend?"destructive":"secondary",children:["improving"===k.improvementTrend&&(0,b.jsx)(H.TrendingUp,{className:"h-3 w-3 mr-1"}),"declining"===k.improvementTrend&&(0,b.jsx)(I.TrendingDown,{className:"h-3 w-3 mr-1"}),"stable"===k.improvementTrend&&(0,b.jsx)(J,{className:"h-3 w-3 mr-1"}),k.improvementTrend.charAt(0).toUpperCase()+k.improvementTrend.slice(1)]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Total Questions"}),(0,b.jsx)(K.Target,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:k.totalQuestionsAnswered}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Questions answered"})]})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Avg Time/Question"}),(0,b.jsx)(i.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(k.avgTimePerQuestion),"s"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average response time"})]})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Weak Areas"}),(0,b.jsx)(I.TrendingDown,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:k.weakAreas.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Topics needing practice"})]})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Strong Areas"}),(0,b.jsx)(H.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:k.strongAreas.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mastered topics"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Accuracy Over Time"}),(0,b.jsx)(n.CardDescription,{children:"Your performance trend"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)(S.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(T.LineChart,{data:l,children:[(0,b.jsx)(Q.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(O.XAxis,{dataKey:"date"}),(0,b.jsx)(P.YAxis,{domain:[0,100]}),(0,b.jsx)(R.Tooltip,{}),(0,b.jsx)(U.Line,{type:"monotone",dataKey:"accuracy",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Weak Areas Breakdown"}),(0,b.jsx)(n.CardDescription,{children:"Topics with lowest accuracy"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)(S.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(M.BarChart,{data:m,children:[(0,b.jsx)(Q.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(O.XAxis,{dataKey:"topic",angle:-45,textAnchor:"end",height:80}),(0,b.jsx)(P.YAxis,{domain:[0,100]}),(0,b.jsx)(R.Tooltip,{}),(0,b.jsx)(N.Bar,{dataKey:"accuracy",fill:"hsl(var(--destructive))"})]})})})]})]}),k.weakAreas.length>0&&(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Weak Areas - Practice Recommended"}),(0,b.jsx)(n.CardDescription,{children:"Focus on these topics to improve your performance"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:k.weakAreas.slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.topic}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.totalAttempts," attempts • Avg time: ",Math.round(a.avgTimeTaken),"s"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-destructive",children:[Math.round(a.accuracy),"%"]}),(0,b.jsx)(q.Progress,{value:a.accuracy,className:"w-24 h-2 mt-1"})]})})]},c))})})]}),k.strongAreas.length>0&&(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Strong Areas"}),(0,b.jsx)(n.CardDescription,{children:"Topics you've mastered"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:k.strongAreas.map((a,c)=>(0,b.jsx)(r.Badge,{variant:"default",className:"text-sm",children:a},c))})})]})]})}let W={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},X={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};function Y({attempts:a,isLoading:c}){let d=(0,e.useMemo)(()=>a?a.map(a=>a.partEarned).filter(Boolean):[],[a]),f=(0,e.useMemo)(()=>0===d.length?0:Math.round(d.length/u.CAR_PARTS.length*100),[d]),g=(0,e.useMemo)(()=>u.CAR_PARTS.find(a=>!d.includes(a)),[d]);return c?(0,b.jsxs)(n.Card,{className:"h-full bg-card/80 backdrop-blur-sm",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(t.Skeleton,{className:"h-6 w-1/2"}),(0,b.jsx)(t.Skeleton,{className:"h-4 w-3/4"})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)(t.Skeleton,{className:"h-24 w-full"}),(0,b.jsx)(t.Skeleton,{className:"h-4 w-full mt-4"})]}),(0,b.jsx)(n.CardFooter,{children:(0,b.jsx)(t.Skeleton,{className:"h-4 w-2/3"})})]}):(0,b.jsxs)(n.Card,{className:"h-full bg-card/80 backdrop-blur-sm",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"My Garage"}),(0,b.jsx)(n.CardDescription,{children:"Your car assembly progress."})]}),(0,b.jsxs)(n.CardContent,{children:[(0,b.jsx)("div",{className:"flex items-center justify-center p-6 bg-muted/50 rounded-lg",children:(0,b.jsx)(k.Car,{className:"h-20 w-20 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-1",children:[(0,b.jsx)("span",{children:"Progress"}),(0,b.jsxs)("span",{children:[f,"%"]})]}),(0,b.jsx)(q.Progress,{value:f,className:"h-2"})]})]}),(0,b.jsx)(n.CardFooter,{children:g?(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Continue quizzing to earn the ",(0,b.jsxs)("span",{className:"font-semibold text-primary",children:[g,"!"]})]}):(0,b.jsx)("p",{className:"text-sm font-semibold text-green-500",children:"Congratulations! You've collected all parts!"})})]})}function Z(){let{user:a}=(0,c.useUser)(),e=(0,c.useFirestore)(),f=(0,c.useMemoFirebase)(()=>a&&e?(0,s.query)((0,s.collection)(e,"exams"),(0,s.where)("enrolledStudentIds","array-contains",a.uid)):null,[a,e]),{data:g,isLoading:h}=(0,c.useCollection)(f),j=(0,d.useRouter)();return h?(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(t.Skeleton,{className:"h-6 w-3/4"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)(t.Skeleton,{className:"h-4 w-1/2"})}),(0,b.jsx)(n.CardFooter,{children:(0,b.jsx)(t.Skeleton,{className:"h-10 w-full"})})]},c))}):g&&0!==g.length?(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:g.map(a=>(0,b.jsxs)(n.Card,{className:"bg-card/80 backdrop-blur-sm",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsxs)(n.CardTitle,{className:"flex items-center justify-between",children:[a.quizTitle,(0,b.jsx)(r.Badge,{variant:"Live Now"===a.status?"default":"secondary",className:"Live Now"===a.status?"animate-pulse":"",children:a.status})]}),(0,b.jsxs)(n.CardDescription,{className:"flex items-center gap-2 pt-2",children:[(0,b.jsx)(i.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:new Date(a.scheduledTime).toLocaleString()})]})]}),(0,b.jsx)(n.CardFooter,{children:(0,b.jsx)(o.Button,{className:"w-full",onClick:()=>j.push(`/exam/${a.id}/lobby`),children:"Enter Waiting Room"})})]},a.id))}):(0,b.jsx)("p",{className:"text-muted-foreground",children:"No upcoming exams found. Join one with an access code!"})}function $({attempts:a,isLoading:c}){return c?(0,b.jsx)(n.Card,{children:(0,b.jsx)(n.CardContent,{className:"p-6",children:(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(t.Skeleton,{className:"h-12 w-full"},c))})})}):a&&0!==a.length?(0,b.jsx)(n.Card,{className:"bg-card/80 backdrop-blur-sm",children:(0,b.jsx)(n.CardContent,{className:"p-0",children:(0,b.jsx)("ul",{className:"divide-y divide-border",children:a.map(a=>(0,b.jsxs)("li",{className:"flex items-center justify-between p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.BookOpen,{className:"h-6 w-6 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.examTitle||"Quiz Attempt"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Score: ",a.score,"/",a.totalQuestions]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:a.partEarned&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Award,{className:"h-4 w-4 text-amber-500"}),(0,b.jsxs)("span",{children:["Part Earned: ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:a.partEarned})]})]})})]},a.id))})})}):(0,b.jsx)("p",{className:"text-muted-foreground mt-4",children:"No recent performance data available."})}let _=x.object({accessCode:x.string().min(6,"Access code must be 6 characters.").max(6,"Access code must be 6 characters.")});function aa(){let{user:a}=(0,c.useUser)(),f=(0,c.useFirestore)(),h=(0,d.useRouter)(),[i,j]=(0,e.useState)(!1),k=(0,v.useForm)({resolver:(0,w.zodResolver)(_),defaultValues:{accessCode:""}}),m=async b=>{if(f&&a){j(!0);try{let c=(0,s.collection)(f,"exams"),d=(0,s.query)(c,(0,s.where)("accessCode","==",b.accessCode)),e=await (0,s.getDocs)(d);if(e.empty)return void(0,y.toast)({variant:"destructive",title:"Invalid Code",description:"No exam found with that access code."});let g=e.docs[0].data();if(g.enrolledStudentIds?.includes(a.uid)){(0,y.toast)({title:"Already Enrolled",description:`You are already enrolled in "${g.quizTitle}".`}),h.push(`/exam/${g.id}/lobby`);return}await (0,s.updateDoc)((0,s.doc)(f,"exams",g.id),{enrolledStudentIds:(0,s.arrayUnion)(a.uid)}),(0,y.toast)({title:"Successfully Enrolled!",description:`You have joined the exam: "${g.quizTitle}".`}),h.push(`/exam/${g.id}/lobby`)}catch(a){(0,y.toast)({variant:"destructive",title:"Error Joining Exam",description:a.message})}finally{j(!1)}}};return(0,b.jsxs)(n.Card,{className:"h-full flex flex-col justify-center bg-card/80 backdrop-blur-sm",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Join an Exam"}),(0,b.jsx)(n.CardDescription,{children:"Enter the access code provided by your instructor."})]}),(0,b.jsx)(n.CardContent,{className:"flex-1 flex items-center",children:(0,b.jsx)("form",{onSubmit:k.handleSubmit(m),className:"w-full",children:(0,b.jsxs)("div",{className:"flex w-full max-w-sm items-start space-x-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(p.Input,{...k.register("accessCode"),placeholder:"Enter Access Code",className:"h-12 text-lg uppercase",maxLength:6}),k.formState.errors.accessCode&&(0,b.jsx)("p",{className:"text-destructive text-xs mt-1",children:k.formState.errors.accessCode.message})]}),(0,b.jsx)(o.Button,{type:"submit",size:"lg",className:"h-12",disabled:i,children:i?(0,b.jsx)(l.Loader2,{className:"h-5 w-5 animate-spin"}):(0,b.jsx)(g.ArrowRight,{className:"h-5 w-5"})})]})})})]})}function ab(){let{user:a}=(0,c.useUser)(),d=(0,c.useFirestore)(),e=(0,c.useMemoFirebase)(()=>a&&d?(0,s.query)((0,s.collection)(d,"attempts"),(0,s.where)("studentId","==",a.uid)):null,[a,d]),{data:g,isLoading:h}=(0,c.useCollection)(e);return(0,b.jsxs)(f.motion.div,{className:"grid grid-cols-12 gap-8 p-4 md:p-8",initial:"hidden",animate:"visible",variants:W,children:[(0,b.jsx)(f.motion.div,{className:"col-span-12",variants:X,children:(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Student Dashboard"}),(0,b.jsx)(o.Button,{asChild:!0,children:(0,b.jsxs)(z.default,{href:"/dashboard/quizzes/create",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"})," Create Quiz"]})})]})}),(0,b.jsx)(f.motion.div,{className:"col-span-12 lg:col-span-4",variants:X,children:(0,b.jsx)(Y,{attempts:g,isLoading:h})}),(0,b.jsx)(f.motion.div,{className:"col-span-12 lg:col-span-8",variants:X,children:(0,b.jsx)(aa,{})}),(0,b.jsxs)(f.motion.div,{className:"col-span-12",variants:X,children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight mb-4",children:"Upcoming Exams"}),(0,b.jsx)(Z,{})]}),(0,b.jsx)(f.motion.div,{className:"col-span-12",variants:X,children:(0,b.jsx)(G,{})}),(0,b.jsx)(f.motion.div,{className:"col-span-12",variants:X,children:(0,b.jsx)(V,{})}),(0,b.jsxs)(f.motion.div,{className:"col-span-12",variants:X,children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight mb-4",children:"Recent Performance"}),(0,b.jsx)($,{attempts:g,isLoading:h})]})]})}function ac(){return(0,b.jsx)(EnhancedInstructorDashboard,{})}a.i(60246),a.i(2710),(0,D.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),(0,D.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),a.i(46842);var ad=a.i(17171),ae=a.i(97020),af=a.i(62036),ag=a.i(69769),ah=a.i(67453);function ai({onComplete:a}){let{user:d}=(0,c.useUser)(),g=(0,c.useFirestore)(),[h,i]=(0,e.useState)("welcome"),[j,k]=(0,e.useState)({class:"",subject:"",goal:void 0,defaultDifficulty:"medium",defaultQuizLength:10}),l=async()=>{if(d&&g)try{await (0,s.setDoc)((0,s.doc)(g,"userPreferences",d.uid),{...j,userId:d.uid,onboardingCompleted:!0},{merge:!0}),i("complete")}catch(a){console.error("Failed to save preferences:",a)}};return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:(0,b.jsxs)(n.Card,{className:"max-w-2xl w-full",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{className:"text-2xl",children:"Welcome to Quizierra!"}),(0,b.jsx)(n.CardDescription,{children:"Let's personalize your learning experience"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)(af.AnimatePresence,{mode:"wait",children:["welcome"===h&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"We'll ask you a few quick questions to customize your quiz experience."}),(0,b.jsx)(o.Button,{onClick:()=>i("class"),className:"w-full",children:"Get Started"})]},"welcome"),"class"===h&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,b.jsx)(ag.GraduationCap,{className:"h-5 w-5"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Class & Subject (Optional)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{htmlFor:"class",children:"Class / Course"}),(0,b.jsx)(p.Input,{id:"class",placeholder:"e.g., CS101, Math 201",value:j.class,onChange:a=>k({...j,class:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{htmlFor:"subject",children:"Subject"}),(0,b.jsx)(p.Input,{id:"subject",placeholder:"e.g., Computer Science, Mathematics",value:j.subject,onChange:a=>k({...j,subject:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>i("welcome"),children:"Back"}),(0,b.jsx)(o.Button,{onClick:()=>i("goal"),className:"flex-1",children:"Continue"})]})]},"class"),"goal"===h&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,b.jsx)(K.Target,{className:"h-5 w-5"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"What's your goal?"})]}),(0,b.jsxs)(ae.RadioGroup,{value:j.goal,onValueChange:a=>k({...j,goal:a}),children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,b.jsx)(ae.RadioGroupItem,{value:"exam",id:"exam"}),(0,b.jsxs)(ad.Label,{htmlFor:"exam",className:"flex-1 cursor-pointer",children:[(0,b.jsx)("div",{className:"font-medium",children:"Exam Preparation"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Preparing for an upcoming test"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,b.jsx)(ae.RadioGroupItem,{value:"revision",id:"revision"}),(0,b.jsxs)(ad.Label,{htmlFor:"revision",className:"flex-1 cursor-pointer",children:[(0,b.jsx)("div",{className:"font-medium",children:"Revision"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Reviewing previously learned material"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,b.jsx)(ae.RadioGroupItem,{value:"concept_clarity",id:"concept_clarity"}),(0,b.jsxs)(ad.Label,{htmlFor:"concept_clarity",className:"flex-1 cursor-pointer",children:[(0,b.jsx)("div",{className:"font-medium",children:"Concept Clarity"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Understanding new concepts better"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>i("class"),children:"Back"}),(0,b.jsx)(o.Button,{onClick:l,className:"flex-1",disabled:!j.goal,children:"Complete Setup"})]})]},"goal"),"complete"===h&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[(0,b.jsx)(ah.CheckCircle2,{className:"h-16 w-16 mx-auto text-green-500"}),(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"All Set!"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Your preferences have been saved. You can change them anytime in settings."}),(0,b.jsx)(o.Button,{onClick:a,className:"w-full",children:"Start Learning"})]},"complete")]})})]})})}var aj=a.i(63910);function ak({onComplete:a}){let{user:d}=(0,c.useUser)(),g=(0,c.useFirestore)(),[i,j]=(0,e.useState)("welcome"),[k,l]=(0,e.useState)({institution:"",subjects:[],teacherId:""}),m=async()=>{if(d&&g)try{await (0,s.updateDoc)((0,s.doc)(g,"users",d.uid),{institution:k.institution,subjects:k.subjects||[],teacherId:k.teacherId}),j("complete")}catch(a){console.error("Failed to save profile:",a),(0,y.toast)({variant:"destructive",title:"Error",description:"Failed to save profile information."})}},q=a=>{a.trim()&&!k.subjects?.includes(a.trim())&&l({...k,subjects:[...k.subjects||[],a.trim()]})};return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:(0,b.jsxs)(n.Card,{className:"max-w-2xl w-full",children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{className:"text-2xl",children:"Teacher Profile Setup"}),(0,b.jsx)(n.CardDescription,{children:"Let's set up your teaching profile"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)(af.AnimatePresence,{mode:"wait",children:["welcome"===i&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Welcome! As a teacher, you can create quizzes, manage classes, and track student progress."}),(0,b.jsx)(o.Button,{onClick:()=>j("institution"),className:"w-full",children:"Get Started"})]},"welcome"),"institution"===i&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,b.jsx)(aj.Building,{className:"h-5 w-5"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Institution Information"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{htmlFor:"institution",children:"Institution Name"}),(0,b.jsx)(p.Input,{id:"institution",placeholder:"e.g., Stanford University",value:k.institution,onChange:a=>l({...k,institution:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{htmlFor:"teacherId",children:"Teacher ID (Optional)"}),(0,b.jsx)(p.Input,{id:"teacherId",placeholder:"e.g., T-12345",value:k.teacherId,onChange:a=>l({...k,teacherId:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>j("welcome"),children:"Back"}),(0,b.jsx)(o.Button,{onClick:()=>j("subjects"),className:"flex-1",disabled:!k.institution,children:"Continue"})]})]},"institution"),"subjects"===i&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,b.jsx)(h.BookOpen,{className:"h-5 w-5"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Subjects You Teach"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ad.Label,{children:"Add Subjects"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Input,{placeholder:"e.g., Computer Science",onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),q(a.currentTarget.value),a.currentTarget.value="")}}),(0,b.jsx)(o.Button,{type:"button",variant:"outline",onClick:a=>{let b=a.currentTarget.previousElementSibling;b&&(q(b.value),b.value="")},children:"Add"})]})]}),k.subjects&&k.subjects.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:k.subjects.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:[a,(0,b.jsx)("button",{onClick:()=>{l({...k,subjects:k.subjects?.filter(b=>b!==a)})},className:"text-primary hover:text-primary/70",children:"×"})]},c))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>j("institution"),children:"Back"}),(0,b.jsx)(o.Button,{onClick:m,className:"flex-1",children:"Complete Setup"})]})]},"subjects"),"complete"===i&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[(0,b.jsx)(ah.CheckCircle2,{className:"h-16 w-16 mx-auto text-green-500"}),(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Profile Complete!"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Your teacher profile has been set up. You can start creating classes and quizzes."}),(0,b.jsx)(o.Button,{onClick:a,className:"w-full",children:"Go to Dashboard"})]},"complete")]})})]})})}function al(){return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight mb-8",children:"Admin Dashboard"}),(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Welcome, Admin!"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("p",{children:"This is the placeholder for the Admin Dashboard. More features coming soon!"})})]})]})}function am(){let{user:a,isUserLoading:f}=(0,c.useUser)(),g=(0,c.useFirestore)(),h=(0,d.useRouter)(),[i,j]=(0,e.useState)(!1),[k,l]=(0,e.useState)(!0),m=(0,c.useMemoFirebase)(()=>a&&g?(0,s.doc)(g,"users",a.uid):null,[a,g]),n=(0,c.useMemoFirebase)(()=>a&&g?(0,s.doc)(g,"userPreferences",a.uid):null,[a,g]),{data:o,isLoading:p}=(0,c.useDoc)(m),{data:q}=(0,c.useDoc)(n);return((0,e.useEffect)(()=>{void 0!==q&&o&&(l(!1),("instructor"!==o.role&&"admin"!==o.role||o.institution)&&("student"!==o.role||q?.onboardingCompleted)||j(!0))},[q,o]),(0,e.useEffect)(()=>{f||a||h.push("/login")},[a,f,h]),k||i)?o?.role==="instructor"||o?.role==="admin"?(0,b.jsx)(ak,{onComplete:()=>j(!1)}):(0,b.jsx)(ai,{onComplete:()=>j(!1)}):f||p||!o?(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)(t.Skeleton,{className:"h-10 w-1/3"})}),(0,b.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(t.Skeleton,{className:"h-48 w-full"})}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(t.Skeleton,{className:"h-48 w-full"})}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsx)(t.Skeleton,{className:"h-64 w-full"})})]})]}):(0,b.jsx)(b.Fragment,{children:(()=>{switch(o.role){case"student":return(0,b.jsx)(ab,{});case"instructor":return(0,b.jsx)(ac,{});case"admin":return(0,b.jsx)(al,{});default:return(0,b.jsx)("div",{children:"Unknown role. Please contact support."})}})()})}a.s(["default",()=>am],20731)}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map