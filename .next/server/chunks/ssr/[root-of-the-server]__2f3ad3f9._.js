module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},11011,a=>{"use strict";var b=a.i(72131),c=a.i(70121),d=a.i(87924),e=Symbol.for("react.lazy"),f=b[" use ".trim().toString()];function g(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===e&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}function h(a){var e;let h,i=(e=a,(h=b.forwardRef((a,d)=>{let{children:e,...h}=a;if(g(e)&&"function"==typeof f&&(e=f(e._payload)),b.isValidElement(e)){var i;let a,f,g=(i=e,(f=(a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.ref:(f=(a=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.props.ref:i.props.ref||i.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(h,e.props);return e.type!==b.Fragment&&(j.ref=d?(0,c.composeRefs)(d,g):g),b.cloneElement(e,j)}return b.Children.count(e)>1?b.Children.only(null):null})).displayName=`${e}.SlotClone`,h),j=b.forwardRef((a,c)=>{let{children:e,...h}=a;g(e)&&"function"==typeof f&&(e=f(e._payload));let j=b.Children.toArray(e),l=j.find(k);if(l){let a=l.props.children,e=j.map(c=>c!==l?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return(0,d.jsx)(i,{...h,ref:c,children:b.isValidElement(a)?b.cloneElement(a,void 0,e):null})}return(0,d.jsx)(i,{...h,ref:c,children:e})});return j.displayName=`${a}.Slot`,j}var i=h("Slot"),j=Symbol("radix.slottable");function k(a){return b.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}a.s(["Slot",()=>i,"createSlot",()=>h])},40695,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(187),f=a.i(97895);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h,"buttonVariants",()=>g])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},92509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},6461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},50463,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("animate-pulse rounded-md bg-muted",a),...d})}a.s(["Skeleton",()=>d])},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},4720,a=>{"use strict";let b=(0,a.i(70106).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},62722,a=>{"use strict";let b=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],53722)},48464,a=>{"use strict";let b=(0,a.i(70106).default)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);a.s(["Car",()=>b],48464)},27422,a=>{"use strict";a.s(["CAR_PARTS",0,["Chassis","Engine","Transmission","Front Wheels","Rear Wheels","Spoiler","Hood","Side Skirts","Exhaust","Headlights"]])},93518,a=>{"use strict";let b=(0,a.i(70106).default)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);a.s(["Award",()=>b],93518)},28989,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(53427);a.i(69387);var e=a.i(60574),f=a.i(3130),g=a.i(50463),h=a.i(72131),i=a.i(27422),j=a.i(96221),k=a.i(16201),l=a.i(62722),m=a.i(93518),n=a.i(48464),o=a.i(4720),p=a.i(53722),q=a.i(40695);function r(){return(0,b.jsx)("div",{className:"p-4 sm:p-8 max-w-3xl mx-auto text-center",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(g.Skeleton,{className:"h-8 w-3/4 mx-auto"}),(0,b.jsx)(g.Skeleton,{className:"h-4 w-1/2 mx-auto mt-2"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)(j.Loader2,{className:"h-12 w-12 text-primary animate-spin mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Your exam is being graded by our AI assistant..."}),(0,b.jsx)(g.Skeleton,{className:"h-32 w-full"})]})]})})}function s(){let a=(0,c.useSearchParams)().get("attemptId"),g=(0,c.useParams)().examId,j=(0,d.useFirestore)(),s=(0,c.useRouter)(),t=(0,d.useMemoFirebase)(()=>j&&a?(0,e.doc)(j,"attempts",a):null,[j,a]),{data:u,isLoading:v}=(0,d.useDoc)(t),[w,x]=(0,h.useState)(null),[y,z]=(0,h.useState)(null);if((0,h.useEffect)(()=>{u&&"Pending Grading"===u.status&&j?(async()=>{try{let a=(u.answers||[]).map(a=>({questionId:a.questionId,questionContent:a.questionContent,answer:a.answer??a.studentAnswer??"",correctAnswer:a.correctAnswer,timeTaken:"number"==typeof a.timeTaken?a.timeTaken:Number(a.timeTaken??0)})),b=await fetch("/api/grade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:a})});if(!b.ok)throw Error("Grading service failed.");let c=await b.json();x(c);let d=(0,e.collection)(j,"attempts"),f=(0,e.query)(d,(0,e.where)("studentId","==",u.studentId)),h=(await (0,e.getDocs)(f)).docs.filter(a=>{let b=a.data();return null!=b.partEarned}).length,k=i.CAR_PARTS[h%i.CAR_PARTS.length],l=c.finalScore>10*u.totalQuestions*.7?k:null;if(t){let a={status:"Completed",score:c.finalScore,gradedAnswers:c.gradedAnswers,completedAt:new Date().toISOString()};l&&(a.partEarned=l),await (0,e.updateDoc)(t,a)}if(g&&j)try{let a=(0,e.query)((0,e.collection)(j,"uploadedMaterials"),(0,e.where)("quizId","==",g)),b=await (0,e.getDocs)(a);if(!b.empty){let a=b.docs[0],d=c.gradedAnswers.filter(a=>a.isCorrect).length,f=c.gradedAnswers.length,g=f>0?Math.round(d/f*100):0;await (0,e.updateDoc)((0,e.doc)(j,"uploadedMaterials",a.id),{quizCompleted:g,materialStatus:"quizCompleted"})}}catch(a){console.error("Failed to update material progress:",a)}}catch(a){z("Failed to grade submission. Please contact your instructor."),console.error(a)}})():u&&"Completed"===u.status&&x({gradedAnswers:u.gradedAnswers,finalScore:u.score})},[u,t,j]),!a)return(0,b.jsxs)("div",{className:"text-center p-8",children:[(0,b.jsx)("p",{className:"text-destructive",children:"No attempt ID found. Please go back to the dashboard."}),(0,b.jsx)(q.Button,{onClick:()=>s.push("/dashboard"),className:"mt-4",children:"Back to Dashboard"})]});if(v||u?.status==="Pending Grading"&&!w&&!y)return(0,b.jsx)(r,{});if(y)return(0,b.jsx)("div",{className:"text-center p-8 text-destructive",children:y});if(!u||!w)return(0,b.jsx)("div",{className:"text-center p-8",children:"Could not load exam results."});let A=10*u.totalQuestions,B=A>0?Math.round(w.finalScore/A*100):0;return(0,b.jsx)("div",{className:"p-4 sm:p-8 max-w-3xl mx-auto",children:(0,b.jsxs)(f.Card,{className:"shadow-lg",children:[(0,b.jsxs)(f.CardHeader,{className:"text-center",children:[(0,b.jsx)(f.CardTitle,{className:"text-3xl",children:"Exam Results"}),(0,b.jsx)(f.CardDescription,{children:u.examTitle})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center p-6 bg-muted/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your Score"}),(0,b.jsxs)("p",{className:"text-6xl font-bold text-primary",children:[B,"%"]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[w.finalScore.toFixed(1)," / ",A," points"]})]}),u.partEarned&&(0,b.jsxs)("div",{className:"text-center p-4 bg-green-500/10 rounded-lg border border-green-500/20",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center justify-center gap-2",children:[(0,b.jsx)(m.Award,{className:"h-5 w-5 text-amber-500"}),"New Part Unlocked!"]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You earned the ",(0,b.jsx)("span",{className:"font-bold text-primary",children:u.partEarned})," for your car!"]}),(0,b.jsx)(n.Car,{className:"h-8 w-8 mx-auto mt-2 text-primary"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Detailed Breakdown"}),w.gradedAnswers.map((a,c)=>(0,b.jsxs)(f.Card,{className:`p-4 ${!a.isCorrect?"border-destructive/50 bg-destructive/5":""}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("p",{className:"font-medium flex-1 pr-4",children:[c+1,". ",a.questionContent]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.isCorrect?(0,b.jsx)(k.CheckCircle,{className:"h-5 w-5 text-green-500"}):(0,b.jsx)(l.XCircle,{className:"h-5 w-5 text-destructive"}),(0,b.jsxs)("span",{className:`font-bold ${a.isCorrect?"text-green-500":"text-destructive"}`,children:[a.score.toFixed(1),"/10"]})]})]}),!a.isCorrect&&(0,b.jsxs)("div",{className:"mt-4 space-y-3 p-3 bg-muted/50 rounded-lg border border-destructive/20",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"âŒ Your answer:"}),(0,b.jsx)("p",{className:"text-sm text-foreground",children:Array.isArray(a.answer)?a.answer.join(", "):a.answer||"No answer provided"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"âœ… Correct answer:"}),(0,b.jsx)("p",{className:"text-sm text-green-600 font-medium",children:a.correctAnswer||"Not available"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"ðŸ’¡ Explanation:"}),(0,b.jsx)("p",{className:"text-sm text-foreground",children:a.justification})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:[(0,b.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Reference from uploaded content"})]}),(0,b.jsxs)(q.Button,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:()=>s.push(`/dashboard/practice-mode?topic=${encodeURIComponent(a.questionContent.substring(0,50))}`),children:[(0,b.jsx)(p.BookOpen,{className:"h-4 w-4 mr-2"}),"Practice Similar Question"]})]}),a.isCorrect&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Your answer: ",(0,b.jsx)("span",{className:"text-foreground",children:Array.isArray(a.answer)?a.answer.join(", "):a.answer})]}),(0,b.jsxs)("p",{className:"text-xs text-blue-500 bg-blue-500/10 rounded-full px-2 py-0.5 mt-2 inline-block",children:["Justification: ",a.justification]})]})]},a.questionId))]}),(0,b.jsx)(q.Button,{className:"w-full",size:"lg",onClick:()=>s.push("/dashboard"),children:"Back to Dashboard"})]})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2f3ad3f9._.js.map