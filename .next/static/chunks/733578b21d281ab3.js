(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";var s=e.i(43476),a=e.i(53427),t=e.i(18566),i=e.i(71645),r=e.i(46932),l=e.i(72520),n=e.i(10980),c=e.i(3116),d=e.i(42009),o=e.i(5125),m=e.i(31278),x=e.i(7233),u=e.i(70065),h=e.i(67881),j=e.i(23750),p=e.i(87336),g=e.i(94179);e.i(36180);var f=e.i(17875),N=e.i(71428),v=e.i(17583),C=e.i(53145),y=e.i(94814),b=e.i(91750),w=e.i(20682),k=e.i(22016),S=e.i(78583),T=e.i(87316),A=e.i(27612),B=e.i(75254);let D=(0,B.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),F=(0,B.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function z(){let{user:e}=(0,a.useUser)(),r=(0,a.useFirestore)(),l=(0,t.useRouter)(),[n,c]=(0,i.useState)(null),d=(0,a.useMemoFirebase)(()=>e&&r?(0,f.query)((0,f.collection)(r,"uploadedMaterials"),(0,f.where)("userId","==",e.uid)):null,[e,r]),{data:o,isLoading:m}=(0,a.useCollection)(d),x=async s=>{if(r&&e){c(s);try{await (0,f.deleteDoc)((0,f.doc)(r,"uploadedMaterials",s)),(0,w.toast)({title:"Material Deleted",description:"The uploaded material has been removed."})}catch(e){(0,w.toast)({variant:"destructive",title:"Error",description:"Failed to delete material."})}finally{c(null)}}};return m?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.Skeleton,{className:"h-8 w-48"}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(N.Skeleton,{className:"h-6 w-3/4"}),(0,s.jsx)(N.Skeleton,{className:"h-4 w-1/2 mt-2"})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsx)(N.Skeleton,{className:"h-4 w-full"}),(0,s.jsx)(N.Skeleton,{className:"h-10 w-full mt-4"})]})]},a))})]}):o&&0!==o.length?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Uploaded Materials"}),(0,s.jsx)(h.Button,{onClick:()=>l.push("/dashboard/practice"),children:"Upload New Material"})]}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(e=>(0,s.jsxs)(u.Card,{className:"bg-card/80 backdrop-blur-sm",children:[(0,s.jsx)(u.CardHeader,{children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(u.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(S.FileText,{className:"h-5 w-5 text-primary"}),e.fileName]}),(0,s.jsxs)(u.CardDescription,{className:"mt-2 flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(T.Calendar,{className:"h-3 w-3"}),new Date(e.uploadedAt).toLocaleDateString()]}),e.subject&&(0,s.jsx)(g.Badge,{variant:"secondary",children:e.subject})]})]})})}),(0,s.jsxs)(u.CardContent,{className:"space-y-4",children:[void 0!==e.quizCompleted&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-1",children:[(0,s.jsx)("span",{children:"Quiz Progress"}),(0,s.jsxs)("span",{children:[e.quizCompleted,"%"]})]}),(0,s.jsx)(p.Progress,{value:e.quizCompleted,className:"h-2"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(h.Button,{size:"sm",variant:"outline",onClick:()=>{e.keyAnswers&&e.keyAnswers.length>0?l.push(`/dashboard/materials/${e.id}/review`):(0,w.toast)({variant:"destructive",title:"No Answers Available",description:"Key answers have not been generated for this material yet."})},className:"flex-1",children:[(0,s.jsx)(F,{className:"h-4 w-4 mr-1"}),"Review Answers"]}),(0,s.jsxs)(h.Button,{size:"sm",onClick:()=>{e.quizId?l.push(`/dashboard/practice?materialId=${e.id}`):l.push(`/dashboard/practice?materialId=${e.id}&generate=true`)},className:"flex-1",children:[(0,s.jsx)(D,{className:"h-4 w-4 mr-1"}),"Start Quiz"]})]}),(0,s.jsxs)(h.Button,{size:"sm",variant:"ghost",onClick:()=>x(e.id),disabled:n===e.id,className:"w-full text-destructive hover:text-destructive",children:[(0,s.jsx)(A.Trash2,{className:"h-4 w-4 mr-1"}),n===e.id?"Deleting...":"Delete"]})]})]},e.id))})]}):(0,s.jsx)(u.Card,{className:"bg-muted/50",children:(0,s.jsxs)(u.CardContent,{className:"p-8 text-center",children:[(0,s.jsx)(S.FileText,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No uploaded materials yet."}),(0,s.jsx)(h.Button,{className:"mt-4",onClick:()=>l.push("/dashboard/practice"),children:"Upload Your First Material"})]})})}var I=e.i(25652),M=e.i(35408);let L=(0,B.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var P=e.i(20278),R=e.i(58249),E=e.i(9694),U=e.i(75225),q=e.i(85183),H=e.i(93230),Y=e.i(72526),Q=e.i(34239),G=e.i(44098),W=e.i(29228),O=e.i(55706);function K(){let{user:e}=(0,a.useUser)(),t=(0,a.useFirestore)(),r=(0,a.useMemoFirebase)(()=>e&&t?(0,f.query)((0,f.collection)(t,"attempts"),(0,f.where)("studentId","==",e.uid)):null,[e,t]),{data:l,isLoading:d}=(0,a.useCollection)(r),o=(0,i.useMemo)(()=>l&&0!==l.length?(0,R.calculateAnalytics)(l):null,[l]);if(d)return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.Skeleton,{className:"h-8 w-48"}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(u.Card,{children:[(0,s.jsx)(u.CardHeader,{children:(0,s.jsx)(N.Skeleton,{className:"h-6 w-3/4"})}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)(N.Skeleton,{className:"h-8 w-full"})})]},a))})]});if(!o||l?.length===0)return(0,s.jsx)(u.Card,{className:"bg-muted/50",children:(0,s.jsxs)(u.CardContent,{className:"p-8 text-center",children:[(0,s.jsx)(n.BookOpen,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Complete some quizzes to see your analytics."})]})});let m=o.accuracyOverTime.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),accuracy:Math.round(e.accuracy)})),x=o.weakAreas.slice(0,5).map(e=>({topic:e.topic.substring(0,20),accuracy:Math.round(e.accuracy)}));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Performance Analytics"}),(0,s.jsxs)(g.Badge,{variant:"improving"===o.improvementTrend?"default":"declining"===o.improvementTrend?"destructive":"secondary",children:["improving"===o.improvementTrend&&(0,s.jsx)(I.TrendingUp,{className:"h-3 w-3 mr-1"}),"declining"===o.improvementTrend&&(0,s.jsx)(M.TrendingDown,{className:"h-3 w-3 mr-1"}),"stable"===o.improvementTrend&&(0,s.jsx)(L,{className:"h-3 w-3 mr-1"}),o.improvementTrend.charAt(0).toUpperCase()+o.improvementTrend.slice(1)]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Total Questions"}),(0,s.jsx)(P.Target,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:o.totalQuestionsAnswered}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Questions answered"})]})]}),(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Avg Time/Question"}),(0,s.jsx)(c.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(o.avgTimePerQuestion),"s"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average response time"})]})]}),(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Weak Areas"}),(0,s.jsx)(M.TrendingDown,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:o.weakAreas.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Topics needing practice"})]})]}),(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Strong Areas"}),(0,s.jsx)(I.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:o.strongAreas.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mastered topics"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{children:"Accuracy Over Time"}),(0,s.jsx)(u.CardDescription,{children:"Your performance trend"})]}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,s.jsxs)(W.LineChart,{data:m,children:[(0,s.jsx)(Y.CartesianGrid,{strokeDasharray:"3 3"}),(0,s.jsx)(q.XAxis,{dataKey:"date"}),(0,s.jsx)(H.YAxis,{domain:[0,100]}),(0,s.jsx)(Q.Tooltip,{}),(0,s.jsx)(O.Line,{type:"monotone",dataKey:"accuracy",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{children:"Weak Areas Breakdown"}),(0,s.jsx)(u.CardDescription,{children:"Topics with lowest accuracy"})]}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,s.jsxs)(E.BarChart,{data:x,children:[(0,s.jsx)(Y.CartesianGrid,{strokeDasharray:"3 3"}),(0,s.jsx)(q.XAxis,{dataKey:"topic",angle:-45,textAnchor:"end",height:80}),(0,s.jsx)(H.YAxis,{domain:[0,100]}),(0,s.jsx)(Q.Tooltip,{}),(0,s.jsx)(U.Bar,{dataKey:"accuracy",fill:"hsl(var(--destructive))"})]})})})]})]}),o.weakAreas.length>0&&(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{children:"Weak Areas - Practice Recommended"}),(0,s.jsx)(u.CardDescription,{children:"Focus on these topics to improve your performance"})]}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)("div",{className:"space-y-4",children:o.weakAreas.slice(0,5).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.topic}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.totalAttempts," attempts • Avg time: ",Math.round(e.avgTimeTaken),"s"]})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-destructive",children:[Math.round(e.accuracy),"%"]}),(0,s.jsx)(p.Progress,{value:e.accuracy,className:"w-24 h-2 mt-1"})]})})]},a))})})]}),o.strongAreas.length>0&&(0,s.jsxs)(u.Card,{children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{children:"Strong Areas"}),(0,s.jsx)(u.CardDescription,{children:"Topics you've mastered"})]}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:o.strongAreas.map((e,a)=>(0,s.jsx)(g.Badge,{variant:"default",className:"text-sm",children:e},a))})})]})]})}let $={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};function V({attempts:e,isLoading:a}){let t=(0,i.useMemo)(()=>e?e.map(e=>e.partEarned).filter(Boolean):[],[e]),r=(0,i.useMemo)(()=>0===t.length?0:Math.round(t.length/v.CAR_PARTS.length*100),[t]),l=(0,i.useMemo)(()=>v.CAR_PARTS.find(e=>!t.includes(e)),[t]);return a?(0,s.jsxs)(u.Card,{className:"h-full bg-card/80 backdrop-blur-sm",children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(N.Skeleton,{className:"h-6 w-1/2"}),(0,s.jsx)(N.Skeleton,{className:"h-4 w-3/4"})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsx)(N.Skeleton,{className:"h-24 w-full"}),(0,s.jsx)(N.Skeleton,{className:"h-4 w-full mt-4"})]}),(0,s.jsx)(u.CardFooter,{children:(0,s.jsx)(N.Skeleton,{className:"h-4 w-2/3"})})]}):(0,s.jsxs)(u.Card,{className:"h-full bg-card/80 backdrop-blur-sm",children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{children:"My Garage"}),(0,s.jsx)(u.CardDescription,{children:"Your car assembly progress."})]}),(0,s.jsxs)(u.CardContent,{children:[(0,s.jsx)("div",{className:"flex items-center justify-center p-6 bg-muted/50 rounded-lg",children:(0,s.jsx)(o.Car,{className:"h-20 w-20 text-muted-foreground"})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-1",children:[(0,s.jsx)("span",{children:"Progress"}),(0,s.jsxs)("span",{children:[r,"%"]})]}),(0,s.jsx)(p.Progress,{value:r,className:"h-2"})]})]}),(0,s.jsx)(u.CardFooter,{children:l?(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Continue quizzing to earn the ",(0,s.jsxs)("span",{className:"font-semibold text-primary",children:[l,"!"]})]}):(0,s.jsx)("p",{className:"text-sm font-semibold text-green-500",children:"Congratulations! You've collected all parts!"})})]})}function J(){let{user:e}=(0,a.useUser)(),i=(0,a.useFirestore)(),r=(0,a.useMemoFirebase)(()=>e&&i?(0,f.query)((0,f.collection)(i,"exams"),(0,f.where)("enrolledStudentIds","array-contains",e.uid)):null,[e,i]),{data:l,isLoading:n}=(0,a.useCollection)(r),d=(0,t.useRouter)();return n?(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(u.Card,{children:[(0,s.jsx)(u.CardHeader,{children:(0,s.jsx)(N.Skeleton,{className:"h-6 w-3/4"})}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)(N.Skeleton,{className:"h-4 w-1/2"})}),(0,s.jsx)(u.CardFooter,{children:(0,s.jsx)(N.Skeleton,{className:"h-10 w-full"})})]},a))}):l&&0!==l.length?(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:l.map(e=>(0,s.jsxs)(u.Card,{className:"bg-card/80 backdrop-blur-sm",children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsxs)(u.CardTitle,{className:"flex items-center justify-between",children:[e.quizTitle,(0,s.jsx)(g.Badge,{variant:"Live Now"===e.status?"default":"secondary",className:"Live Now"===e.status?"animate-pulse":"",children:e.status})]}),(0,s.jsxs)(u.CardDescription,{className:"flex items-center gap-2 pt-2",children:[(0,s.jsx)(c.Clock,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:new Date(e.scheduledTime).toLocaleString()})]})]}),(0,s.jsx)(u.CardFooter,{children:(0,s.jsx)(h.Button,{className:"w-full",onClick:()=>d.push(`/exam/${e.id}/lobby`),children:"Enter Waiting Room"})})]},e.id))}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"No upcoming exams found. Join one with an access code!"})}function X({attempts:e,isLoading:a}){return a?(0,s.jsx)(u.Card,{children:(0,s.jsx)(u.CardContent,{className:"p-6",children:(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,a)=>(0,s.jsx)(N.Skeleton,{className:"h-12 w-full"},a))})})}):e&&0!==e.length?(0,s.jsx)(u.Card,{className:"bg-card/80 backdrop-blur-sm",children:(0,s.jsx)(u.CardContent,{className:"p-0",children:(0,s.jsx)("ul",{className:"divide-y divide-border",children:e.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(n.BookOpen,{className:"h-6 w-6 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.examTitle||"Quiz Attempt"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Score: ",e.score,"/",e.totalQuestions]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:e.partEarned&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Award,{className:"h-4 w-4 text-amber-500"}),(0,s.jsxs)("span",{children:["Part Earned: ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:e.partEarned})]})]})})]},e.id))})})}):(0,s.jsx)("p",{className:"text-muted-foreground mt-4",children:"No recent performance data available."})}let Z=b.object({accessCode:b.string().min(6,"Access code must be 6 characters.").max(6,"Access code must be 6 characters.")});function ee(){let{user:e}=(0,a.useUser)(),r=(0,a.useFirestore)(),n=(0,t.useRouter)(),[c,d]=(0,i.useState)(!1),o=(0,C.useForm)({resolver:(0,y.zodResolver)(Z),defaultValues:{accessCode:""}}),x=async s=>{if(r&&e){d(!0);try{let a=(0,f.collection)(r,"exams"),t=(0,f.query)(a,(0,f.where)("accessCode","==",s.accessCode)),i=await (0,f.getDocs)(t);if(i.empty)return void(0,w.toast)({variant:"destructive",title:"Invalid Code",description:"No exam found with that access code."});let l=i.docs[0].data();if(l.enrolledStudentIds?.includes(e.uid)){(0,w.toast)({title:"Already Enrolled",description:`You are already enrolled in "${l.quizTitle}".`}),n.push(`/exam/${l.id}/lobby`);return}await (0,f.updateDoc)((0,f.doc)(r,"exams",l.id),{enrolledStudentIds:(0,f.arrayUnion)(e.uid)}),(0,w.toast)({title:"Successfully Enrolled!",description:`You have joined the exam: "${l.quizTitle}".`}),n.push(`/exam/${l.id}/lobby`)}catch(e){(0,w.toast)({variant:"destructive",title:"Error Joining Exam",description:e.message})}finally{d(!1)}}};return(0,s.jsxs)(u.Card,{className:"h-full flex flex-col justify-center bg-card/80 backdrop-blur-sm",children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{children:"Join an Exam"}),(0,s.jsx)(u.CardDescription,{children:"Enter the access code provided by your instructor."})]}),(0,s.jsx)(u.CardContent,{className:"flex-1 flex items-center",children:(0,s.jsx)("form",{onSubmit:o.handleSubmit(x),className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full max-w-sm items-start space-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(j.Input,{...o.register("accessCode"),placeholder:"Enter Access Code",className:"h-12 text-lg uppercase",maxLength:6}),o.formState.errors.accessCode&&(0,s.jsx)("p",{className:"text-destructive text-xs mt-1",children:o.formState.errors.accessCode.message})]}),(0,s.jsx)(h.Button,{type:"submit",size:"lg",className:"h-12",disabled:c,children:c?(0,s.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"}):(0,s.jsx)(l.ArrowRight,{className:"h-5 w-5"})})]})})})]})}function es(){let{user:e}=(0,a.useUser)(),t=(0,a.useFirestore)(),i=(0,a.useMemoFirebase)(()=>e&&t?(0,f.query)((0,f.collection)(t,"attempts"),(0,f.where)("studentId","==",e.uid)):null,[e,t]),{data:l,isLoading:n}=(0,a.useCollection)(i);return(0,s.jsxs)(r.motion.div,{className:"grid grid-cols-12 gap-8 p-4 md:p-8",initial:"hidden",animate:"visible",variants:$,children:[(0,s.jsx)(r.motion.div,{className:"col-span-12",variants:_,children:(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Student Dashboard"}),(0,s.jsx)(h.Button,{asChild:!0,children:(0,s.jsxs)(k.default,{href:"/dashboard/quizzes/create",children:[(0,s.jsx)(x.Plus,{className:"mr-2 h-4 w-4"})," Create Quiz"]})})]})}),(0,s.jsx)(r.motion.div,{className:"col-span-12 lg:col-span-4",variants:_,children:(0,s.jsx)(V,{attempts:l,isLoading:n})}),(0,s.jsx)(r.motion.div,{className:"col-span-12 lg:col-span-8",variants:_,children:(0,s.jsx)(ee,{})}),(0,s.jsxs)(r.motion.div,{className:"col-span-12",variants:_,children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold tracking-tight mb-4",children:"Upcoming Exams"}),(0,s.jsx)(J,{})]}),(0,s.jsx)(r.motion.div,{className:"col-span-12",variants:_,children:(0,s.jsx)(z,{})}),(0,s.jsx)(r.motion.div,{className:"col-span-12",variants:_,children:(0,s.jsx)(K,{})}),(0,s.jsxs)(r.motion.div,{className:"col-span-12",variants:_,children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold tracking-tight mb-4",children:"Recent Performance"}),(0,s.jsx)(X,{attempts:l,isLoading:n})]})]})}function ea(){return(0,s.jsx)(EnhancedInstructorDashboard,{})}e.i(61911),e.i(33467),(0,B.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),(0,B.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),e.i(84614);var et=e.i(10708),ei=e.i(16540),er=e.i(88653),el=e.i(32095),en=e.i(95468);function ec({onComplete:e}){let{user:t}=(0,a.useUser)(),l=(0,a.useFirestore)(),[n,c]=(0,i.useState)("welcome"),[d,o]=(0,i.useState)({class:"",subject:"",goal:void 0,defaultDifficulty:"medium",defaultQuizLength:10}),m=async()=>{if(t&&l)try{await (0,f.setDoc)((0,f.doc)(l,"userPreferences",t.uid),{...d,userId:t.uid,onboardingCompleted:!0},{merge:!0}),c("complete")}catch(e){console.error("Failed to save preferences:",e)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:(0,s.jsxs)(u.Card,{className:"max-w-2xl w-full",children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{className:"text-2xl",children:"Welcome to Quizierra!"}),(0,s.jsx)(u.CardDescription,{children:"Let's personalize your learning experience"})]}),(0,s.jsx)(u.CardContent,{children:(0,s.jsxs)(er.AnimatePresence,{mode:"wait",children:["welcome"===n&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"We'll ask you a few quick questions to customize your quiz experience."}),(0,s.jsx)(h.Button,{onClick:()=>c("class"),className:"w-full",children:"Get Started"})]},"welcome"),"class"===n&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,s.jsx)(el.GraduationCap,{className:"h-5 w-5"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Class & Subject (Optional)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(et.Label,{htmlFor:"class",children:"Class / Course"}),(0,s.jsx)(j.Input,{id:"class",placeholder:"e.g., CS101, Math 201",value:d.class,onChange:e=>o({...d,class:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(et.Label,{htmlFor:"subject",children:"Subject"}),(0,s.jsx)(j.Input,{id:"subject",placeholder:"e.g., Computer Science, Mathematics",value:d.subject,onChange:e=>o({...d,subject:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.Button,{variant:"outline",onClick:()=>c("welcome"),children:"Back"}),(0,s.jsx)(h.Button,{onClick:()=>c("goal"),className:"flex-1",children:"Continue"})]})]},"class"),"goal"===n&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,s.jsx)(P.Target,{className:"h-5 w-5"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"What's your goal?"})]}),(0,s.jsxs)(ei.RadioGroup,{value:d.goal,onValueChange:e=>o({...d,goal:e}),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,s.jsx)(ei.RadioGroupItem,{value:"exam",id:"exam"}),(0,s.jsxs)(et.Label,{htmlFor:"exam",className:"flex-1 cursor-pointer",children:[(0,s.jsx)("div",{className:"font-medium",children:"Exam Preparation"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Preparing for an upcoming test"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,s.jsx)(ei.RadioGroupItem,{value:"revision",id:"revision"}),(0,s.jsxs)(et.Label,{htmlFor:"revision",className:"flex-1 cursor-pointer",children:[(0,s.jsx)("div",{className:"font-medium",children:"Revision"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Reviewing previously learned material"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,s.jsx)(ei.RadioGroupItem,{value:"concept_clarity",id:"concept_clarity"}),(0,s.jsxs)(et.Label,{htmlFor:"concept_clarity",className:"flex-1 cursor-pointer",children:[(0,s.jsx)("div",{className:"font-medium",children:"Concept Clarity"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Understanding new concepts better"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.Button,{variant:"outline",onClick:()=>c("class"),children:"Back"}),(0,s.jsx)(h.Button,{onClick:m,className:"flex-1",disabled:!d.goal,children:"Complete Setup"})]})]},"goal"),"complete"===n&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[(0,s.jsx)(en.CheckCircle2,{className:"h-16 w-16 mx-auto text-green-500"}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:"All Set!"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your preferences have been saved. You can change them anytime in settings."}),(0,s.jsx)(h.Button,{onClick:e,className:"w-full",children:"Start Learning"})]},"complete")]})})]})})}var ed=e.i(42920);function eo({onComplete:e}){let{user:t}=(0,a.useUser)(),l=(0,a.useFirestore)(),[c,d]=(0,i.useState)("welcome"),[o,m]=(0,i.useState)({institution:"",subjects:[],teacherId:""}),x=async()=>{if(t&&l)try{await (0,f.updateDoc)((0,f.doc)(l,"users",t.uid),{institution:o.institution,subjects:o.subjects||[],teacherId:o.teacherId}),d("complete")}catch(e){console.error("Failed to save profile:",e),(0,w.toast)({variant:"destructive",title:"Error",description:"Failed to save profile information."})}},p=e=>{e.trim()&&!o.subjects?.includes(e.trim())&&m({...o,subjects:[...o.subjects||[],e.trim()]})};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:(0,s.jsxs)(u.Card,{className:"max-w-2xl w-full",children:[(0,s.jsxs)(u.CardHeader,{children:[(0,s.jsx)(u.CardTitle,{className:"text-2xl",children:"Teacher Profile Setup"}),(0,s.jsx)(u.CardDescription,{children:"Let's set up your teaching profile"})]}),(0,s.jsx)(u.CardContent,{children:(0,s.jsxs)(er.AnimatePresence,{mode:"wait",children:["welcome"===c&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Welcome! As a teacher, you can create quizzes, manage classes, and track student progress."}),(0,s.jsx)(h.Button,{onClick:()=>d("institution"),className:"w-full",children:"Get Started"})]},"welcome"),"institution"===c&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,s.jsx)(ed.Building,{className:"h-5 w-5"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Institution Information"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(et.Label,{htmlFor:"institution",children:"Institution Name"}),(0,s.jsx)(j.Input,{id:"institution",placeholder:"e.g., Stanford University",value:o.institution,onChange:e=>m({...o,institution:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(et.Label,{htmlFor:"teacherId",children:"Teacher ID (Optional)"}),(0,s.jsx)(j.Input,{id:"teacherId",placeholder:"e.g., T-12345",value:o.teacherId,onChange:e=>m({...o,teacherId:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.Button,{variant:"outline",onClick:()=>d("welcome"),children:"Back"}),(0,s.jsx)(h.Button,{onClick:()=>d("subjects"),className:"flex-1",disabled:!o.institution,children:"Continue"})]})]},"institution"),"subjects"===c&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-primary mb-4",children:[(0,s.jsx)(n.BookOpen,{className:"h-5 w-5"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Subjects You Teach"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(et.Label,{children:"Add Subjects"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(j.Input,{placeholder:"e.g., Computer Science",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),p(e.currentTarget.value),e.currentTarget.value="")}}),(0,s.jsx)(h.Button,{type:"button",variant:"outline",onClick:e=>{let s=e.currentTarget.previousElementSibling;s&&(p(s.value),s.value="")},children:"Add"})]})]}),o.subjects&&o.subjects.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:o.subjects.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:[e,(0,s.jsx)("button",{onClick:()=>{m({...o,subjects:o.subjects?.filter(s=>s!==e)})},className:"text-primary hover:text-primary/70",children:"×"})]},a))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.Button,{variant:"outline",onClick:()=>d("institution"),children:"Back"}),(0,s.jsx)(h.Button,{onClick:x,className:"flex-1",children:"Complete Setup"})]})]},"subjects"),"complete"===c&&(0,s.jsxs)(r.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[(0,s.jsx)(en.CheckCircle2,{className:"h-16 w-16 mx-auto text-green-500"}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:"Profile Complete!"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your teacher profile has been set up. You can start creating classes and quizzes."}),(0,s.jsx)(h.Button,{onClick:e,className:"w-full",children:"Go to Dashboard"})]},"complete")]})})]})})}function em(){return(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight mb-8",children:"Admin Dashboard"}),(0,s.jsxs)(u.Card,{children:[(0,s.jsx)(u.CardHeader,{children:(0,s.jsx)(u.CardTitle,{children:"Welcome, Admin!"})}),(0,s.jsx)(u.CardContent,{children:(0,s.jsx)("p",{children:"This is the placeholder for the Admin Dashboard. More features coming soon!"})})]})]})}function ex(){let{user:e,isUserLoading:r}=(0,a.useUser)(),l=(0,a.useFirestore)(),n=(0,t.useRouter)(),[c,d]=(0,i.useState)(!1),[o,m]=(0,i.useState)(!0),x=(0,a.useMemoFirebase)(()=>e&&l?(0,f.doc)(l,"users",e.uid):null,[e,l]),u=(0,a.useMemoFirebase)(()=>e&&l?(0,f.doc)(l,"userPreferences",e.uid):null,[e,l]),{data:h,isLoading:j}=(0,a.useDoc)(x),{data:p}=(0,a.useDoc)(u);return((0,i.useEffect)(()=>{void 0!==p&&h&&(m(!1),("instructor"!==h.role&&"admin"!==h.role||h.institution)&&("student"!==h.role||p?.onboardingCompleted)||d(!0))},[p,h]),(0,i.useEffect)(()=>{r||e||n.push("/login")},[e,r,n]),o||c)?h?.role==="instructor"||h?.role==="admin"?(0,s.jsx)(eo,{onComplete:()=>d(!1)}):(0,s.jsx)(ec,{onComplete:()=>d(!1)}):r||j||!h?(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(N.Skeleton,{className:"h-10 w-1/3"})}),(0,s.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(N.Skeleton,{className:"h-48 w-full"})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(N.Skeleton,{className:"h-48 w-full"})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)(N.Skeleton,{className:"h-64 w-full"})})]})]}):(0,s.jsx)(s.Fragment,{children:(()=>{switch(h.role){case"student":return(0,s.jsx)(es,{});case"instructor":return(0,s.jsx)(ea,{});case"admin":return(0,s.jsx)(em,{});default:return(0,s.jsx)("div",{children:"Unknown role. Please contact support."})}})()})}e.s(["default",()=>ex],78928)}]);